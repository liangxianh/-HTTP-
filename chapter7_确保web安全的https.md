### 确保web安全的https

在http协议中有可能存在信息窃听或身份伪装等安全问题，使用https通信机制可以有效的防止这些问题；

#### 一 http的缺点

* 通信使用明文（不加密），内容可能被窃听；
* 不验证通信方的身份，因此有可能遭遇伪装；
* 无法证明报文的完整性，所以有可能已遭篡改；

这些问题不仅在http上出现，其他未加密的协议中也会存在这类问题；

1. 通信使用明文可能会被窃听
由于http本身不具备加密功能，无法做到对通信整体（http协议通信的请求和响应）进行加密，即http报文使用明文发送；像wireshark这种抓包工具可以获取http协议的请求和响应的内容，并对其进行解析；我们可以加密处理防止被窃听

* 通信的加密：http协议没有加密机制，可以通过和ssl(secure socket layer,安全套接层)和tls(transport layer security,安全传输协议)的组合使用，加密http的通信内容；

 > 用ssl建立安全通信后，就可以在这条线路上进行http通信了；与ssl组合的http被称为**https**（http secure,超文本传输安全协议）或**http over ssl**

* 内容的加密：对http报文的内容进行加密处理，前提要求客户端和服务器同时具备加密和解密机制；主要应用于web服务中，由于不是对整个通信链路进行加密，所以内容仍然有被篡改的风险；

2. 不验证通信方的身份，因此有可能遭遇伪装

http协议中的请求和响应不会对通信方进行确认；即存在服务端是否就是发送请求uri真正指定的主机，返回的响应是否真正的返回到实际提出请求的客户端等问题

* 任何人都可发起请求（web服务器没有设置限定访问的前提下）
> 无法确认请求发送到目标的web服务器是否是按真实意图返回响应的那台服务器；有可能是已伪装的web服务器；

> 无法确定返回到的客户端是否是按真实意图接收响应的那个客户端；有可能是已伪装的客户端；

> 无法确定正在通信的双方是否具备访问权限，因为某些web服务器上保存着重要的信息，只想发给特定用户通信的权限；

> 无法判定请求是来自何方出自谁手；
 
> 即使是无意义的请求也会照单全收；无法阻止海量请求下的dos攻击（denial of service，拒绝服务攻击）


* 查明对手的证书

虽然使用http无法确定通信方，但是使用ssl则可以；ssl不仅提供通道加密处理，而且还使用了一种被称为证书的手段，可以用于确认通信方；证书是有信任的第三方机构颁发，用于证明客户端和服务器是实际存在的；

3. 无法证明报文的完整性，所以有可能已遭篡改

* 接受到的内容可能有误
请求或响应在传输途中被攻击者拦截并篡改内容的攻击称为中间人攻击（Man-in-the-Middle attack,MITM）

* 如何防止篡改
常用的是MD5和SHA-1等散列值校验的方法，以及用来确认文件的数字签名方法，但是MD5本身被篡改的话，用户没有办法得知；防止这些弊端，可以使用https；ssl提供认证和加密处理及摘要功能；

#### 二 http+加密+认证+完整性保护 = https

1. http+ 通信加密+ 证书 +完整性保护，我们把添加了加密及认证机制的http称为https
2. https是身披ssl外壳的http；通常http直接和tcp通信，当使用ssl时，则演变为先和ssl通信，在由ssl和tcp通信；

* ssl是独立于http的协议，所以不光是http协议，其他运行在应用曾的smtp和telnet等协议都可以配合ssl协议使用；ssl是世界上应用最广泛的网络安全技术；

3. 相互交换密钥的公开密钥加密技术
 



