## 与HTTP协作的Web服务器

1 用单台虚拟机实现多个域名  
  > HTTP/1.1允许一台HTTP服务器搭建多个web站点，即使物理层面只有一台服务取，但是只要使用虚拟主机的功能，则可以假想已具有多台服务器
  > 客户端使用HTTP协议访问服务器时，会经常采用类似www.hackr.jp 这样的主机名和域名；域名通过DNS服务映射到IP地址后，访问目标网站；若一台服务器内托管了www.tricorder.jp 和 www.hackr.jp 两个域名，当收到请求时就需要弄清楚，究竟要访问哪个域名；
  > 在相同IP地址下， 由于虚拟主机可以寄存多个不同主机名和域名的web网站，因此在发送HTTP请求时，<b>必须在Host首部内完整指定主机名或域名的uri</b>

2 通信数据转发程序：代理/网关/隧道
  HTTP通信时，除了客户端和服务器以外，还有一些用于通信数据转发的应用程序，例如代理/网关/和隧道；这些和服务器一起可以将请求转发给通信线路上的下一站服务器，并且能够接受服务器返回的响应并转发给客户端；
  
  > 代理：一种有转发功能的应用程序，扮演了位于服务器和客户端的'中间人'角色,接受client端的请求并转发给服务器，同时接收服务器的响应并转发个客户端；
  >> 使用代理服务器的理由：1 利用缓存技术减少网络带宽的流量；2 组织内部针对特定网站的访问控制； 3 获取访问日志为主要目的 等等
  >> 代理有多种使用方法，按两种基准分类；一种是是否使用缓存，另一种是是否会修改报文
  >>> 缓存代理（Caching Proxy），会预先将资源的副本保存在代理服务器上；当代理在次接收到相同资源的请求时，就可以不从源服务器那里获取资源，而是将之前的缓存作为响应返回
  >>> 透明代理(Transparent Proxy)，转发请求或响应时，不对报文做任何加工的代理类型被称为透明代理；
    
  > 网关：是转发其他服务器通信数据的服务器，接收从客户端发送来的请求时，他就像自己拥有资源的服务器一样对请求进行处理；
  >> <b>网关可以通信线路上的服务器提供非HTTP协议服务</b>
  >> 利用网关可以提高通信的安全性，可以在客户端和网关之间的通信线路上加密以确保链接的安全；如网关可以链接数据库，使用SQL语句查询数据；

注意：严格来说，代理连接的是两个或多个使用相同协议的应用程序，而网关可以连接两个或多个使用不同协议的应用程序。网关扮演的是‘协议转换器’的角色，即使客户端和服务端使用的是不同的协议，客户端也可以通过网关来和客户端进行交互。

  > 隧道：是在相隔甚远的客户端和服务器两者之间进行中转，并保持双方通信连接的应用程序；


